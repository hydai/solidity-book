(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{382:function(_,a,t){"use strict";t.r(a);var v=t(17),s=Object(v.a)({},(function(){var _=this,a=_._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[a("h1",{attrs:{id:"eip-663-新增-swapn、dupn-和-exchange-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eip-663-新增-swapn、dupn-和-exchange-指令"}},[_._v("#")]),_._v(" EIP-663 新增 SWAPN、DUPN 和 EXCHANGE 指令")]),_._v(" "),a("h2",{attrs:{id:"_1-簡介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-簡介"}},[_._v("#")]),_._v(" 1. 簡介")]),_._v(" "),a("ul",[a("li",[_._v("這個提案讓在 EVM 做堆疊操作更方便。")]),_._v(" "),a("li",[_._v("原本 EVM 只能輕鬆存取堆疊前 16 個位置，造成編譯合約時比較麻煩。")]),_._v(" "),a("li",[_._v("EIP-663 希望提供更直觀和有效率的解決方式。")])]),_._v(" "),a("h2",{attrs:{id:"_2-傳統堆疊操作的挑戰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-傳統堆疊操作的挑戰"}},[_._v("#")]),_._v(" 2. 傳統堆疊操作的挑戰")]),_._v(" "),a("ul",[a("li",[_._v("EVM 堆疊可以放多達 1024 個值，但只能輕鬆操作前 16 個。")]),_._v(" "),a("li",[_._v("若要更深位置，就得用許多指令組合，容易出錯，也會增加合約複雜度。")])]),_._v(" "),a("h2",{attrs:{id:"_3-eip-663-的解法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-eip-663-的解法"}},[_._v("#")]),_._v(" 3. EIP-663 的解法")]),_._v(" "),a("ul",[a("li",[_._v("可操作堆疊最多 256 個位置，增加彈性。")]),_._v(" "),a("li",[_._v("提供三個新指令：DUPN、SWAPN、EXCHANGE，減少多餘步驟。")])]),_._v(" "),a("h2",{attrs:{id:"_4-新指令的執行細節"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-新指令的執行細節"}},[_._v("#")]),_._v(" 4. 新指令的執行細節")]),_._v(" "),a("ul",[a("li",[_._v("參數都是 8-bit。")]),_._v(" "),a("li",[_._v("DUPN & SWAPN：可任意操作與頂端相隔 1~256 深度的物件。")]),_._v(" "),a("li",[_._v("EXCHANGE：用參數前後 4-bit 代表要交換的堆疊位置。")]),_._v(" "),a("li",[_._v("Gas 與現有 DUP*、SWAP* 相同，都是 3。")])]),_._v(" "),a("h2",{attrs:{id:"_5-使用-exchange-的案例分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用-exchange-的案例分析"}},[_._v("#")]),_._v(" 5. 使用 EXCHANGE 的案例分析")]),_._v(" "),a("ul",[a("li",[_._v("EXCHANGE 可以一次交換堆疊中的兩個值，常比多次 SWAPN 更有效率。")]),_._v(" "),a("li",[_._v("若想把 top|A|B|C| 改成 A|C|B，只需一個 EXCHANGE 就能完成。")])]),_._v(" "),a("h2",{attrs:{id:"_6-測試與驗證"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-測試與驗證"}},[_._v("#")]),_._v(" 6. 測試與驗證")]),_._v(" "),a("ul",[a("li",[_._v("如果堆疊位置不夠，像是要複製不存在的值，就會失敗。")]),_._v(" "),a("li",[_._v("Gas 不足或堆疊溢出，同樣會導致指令失敗。")]),_._v(" "),a("li",[_._v("正確行為：DUPN 是把某個值複製到頂端；SWAPN 與 EXCHANGE 只交換，不改變堆疊長度。")])]),_._v(" "),a("h2",{attrs:{id:"_7-結論"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-結論"}},[_._v("#")]),_._v(" 7. 結論")]),_._v(" "),a("ul",[a("li",[_._v("EIP-663 讓編譯器更簡單，也提供更強大的堆疊操作方式。")]),_._v(" "),a("li",[_._v("適用場景更多，合約的設計也能更靈活。")])])])}),[],!1,null,null,null);a.default=s.exports}}]);